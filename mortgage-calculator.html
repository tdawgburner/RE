<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mortgage Calculator - DreamKey Realty</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      background: #1f1f1f;
      padding: 20px;
      text-align: center;
    }
    header h1 {
      margin: 0;
    }
    .container {
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: none;
      font-size: 1em;
    }
    button {
      background-color: #00aaff;
      color: white;
      padding: 10px 15px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      margin-top: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #1f1f1f;
    }
    a.back-link {
      display: inline-block;
      margin-top: 20px;
      color: #00aaff;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>Mortgage Calculator</h1>
  </header>

  <div class="container">
    <label>Home Price ($)</label>
    <input type="number" id="price" value="600000">

    <label>Down Payment ($)</label>
    <input type="number" id="downPayment" value="120000">

    <label>Loan Term (Years)</label>
    <input type="number" id="term" value="30">

    <label>Interest Rate (%)</label>
    <input type="number" step="0.01" id="rate" value="6.5">

    <label>Extra Monthly Payment ($)</label>
    <input type="number" id="extra" value="0">

    <label>Select City (optional)</label>
    <select id="city">
      <option value="">--None--</option>
      <option value="DC">Washington, DC</option>
      <option value="NYC">New York, NY</option>
      <option value="SF">San Francisco, CA</option>
      <option value="ATX">Austin, TX</option>
      <option value="CHI">Chicago, IL</option>
      <option value="MIA">Miami, FL</option>
      <option value="SEA">Seattle, WA</option>
      <option value="DEN">Denver, CO</option>
      <option value="BOS">Boston, MA</option>
    </select>

    <button onclick="calculate()">Calculate</button>
    <canvas id="chart" height="100"></canvas>
    <table id="results"></table>
    <a class="back-link" href="index.html">&larr; Back to Home</a>
  </div>

  <script>
    const taxRates = {
      DC: 0.0085,
      NYC: 0.0105,
      SF: 0.012,
      ATX: 0.0181,
      CHI: 0.0225,
      MIA: 0.012,
      SEA: 0.011,
      DEN: 0.007,
      BOS: 0.0108
    };

    function calculate() {
      const price = parseFloat(document.getElementById('price').value);
      const downPayment = parseFloat(document.getElementById('downPayment').value);
      const loanAmount = price - downPayment;
      const years = parseInt(document.getElementById('term').value);
      const interest = parseFloat(document.getElementById('rate').value) / 100 / 12;
      const months = years * 12;
      const extra = parseFloat(document.getElementById('extra').value);
      const city = document.getElementById('city').value;
      const propertyTaxRate = taxRates[city] || 0;

      const propertyTaxMonthly = (price * propertyTaxRate) / 12;

      const monthly = (loanAmount * interest) / (1 - Math.pow(1 + interest, -months));
      let balance = loanAmount;
      let table = `<tr><th>Month</th><th>Principal</th><th>Interest</th><th>Property Tax</th><th>Balance</th></tr>`;

      let totalPrincipal = 0;
      let interestData = [], principalData = [];

      for (let i = 1; i <= 72; i++) {
        const interestPayment = balance * interest;
        const principalPayment = (monthly + extra) - interestPayment;
        balance -= principalPayment;
        totalPrincipal += principalPayment;

        interestData.push(interestPayment);
        principalData.push(principalPayment);

        table += `<tr><td>${i}</td><td>$${principalPayment.toFixed(2)}</td><td>$${interestPayment.toFixed(2)}</td><td>$${propertyTaxMonthly.toFixed(2)}</td><td>$${balance.toFixed(2)}</td></tr>`;
      }

      document.getElementById('results').innerHTML =
        `<tr><th colspan="5">First 72 Months Summary</th></tr>
         <tr><td colspan="5"><strong>Total Principal Paid:</strong> $${totalPrincipal.toFixed(2)}<br>
         <strong>Monthly Property Tax:</strong> $${propertyTaxMonthly.toFixed(2)}</td></tr>`
        + table;

      new Chart(document.getElementById("chart"), {
        type: 'line',
        data: {
          labels: [...Array(72).keys()].map(i => i + 1),
          datasets: [
            {
              label: 'Principal',
              borderColor: '#00ff99',
              backgroundColor: 'transparent',
              data: principalData,
            },
            {
              label: 'Interest',
              borderColor: '#ff4d4d',
              backgroundColor: 'transparent',
              data: interestData,
            }
          ]
        },
        options: {
          responsive: true,
          plugins: { legend: { labels: { color: '#fff' } } },
          scales: {
            x: { ticks: { color: '#fff' } },
            y: { ticks: { color: '#fff' } }
          }
        }
      });
    }
  </script>
</body>
</html>
